/*****************************************************************************
 *
 *        Dateiname:    keil_init.ini
 *
 *        Projekt:      Sichere Eisenbahnsteuerung
 *
 *        Autor:        Icken, Jan-Christopher
 *
 *
 *        Modul:        XXX
 *
 *        Beschreibung:
 *        Init Skript fuer das Ausfuehren von Testfaellen in der Keil Umgebung 
 *
 ****************************************************************************/
 
signal void SSC_MCUOut (void) {
 printf ("SSC_Slave geladen\n");
  while (1) {
    wwatch(SSCOUT);
    SSCIN = SSCOUT;					       
    printf ("SSC Output %2.2X\n", (unsigned) SSCOUT);
  }
}

signal void s88_software(unsigned long adr) {
 printf ("S88_Software_Rueckmeldemodul geladen 0x%X\n", adr);
 while(1) {
	 rwatch(adr);
	 _WBYTE (adr, (_RBYTE(adr) & 0xF7));	//  Data auf 0 setzen   
	 printf ("PORT5 gelesen, DATA auf LOW gesetzt");	 
	 rwatch(adr);	 
	 _WBYTE (adr, (_RBYTE(adr) | 0x08));       //  Data auf 1 setzen
	 printf ("PORT5 gelesen, DATA auf HIGH gesetzt");
 } 
 }


//Softwarewatchdog abschalten
PE_SWD=0;
RESET;

s88_software(&P5);
SSC_MCUOut();